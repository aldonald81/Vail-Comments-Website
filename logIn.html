<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    
    <link rel='stylesheet' href='assets/css/styles.css'>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap" rel="stylesheet">

    <title>Log In</title>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-6" style="margin-top: 5%">
          <!-- Form adapted from https://mdbootstrap.com/docs/standard/extended/login/ #5 -->
          <form style="width: 23rem;" action="logInHandler.php" method="POST">
            <h1 style="text-align: left; margin-bottom: 8%"><b>Vail Comments</b></h1>

            <h3 class="fw-normal mb-2 pb-2" style="letter-spacing: 1px;">Log In</h3>

            <div class="form-outline mb-4">
              <label class="form-label" for="email">Email address</label>
              <input required type="email" name="email" id="emailInput" class="form-control form-control-lg" />
            </div>

            <div class="form-outline mb-4">
              <label class="form-label" for="code">Gourmet Code</label>
              <input required type="password" name="code" id="form2Example2" class="form-control form-control-lg" />
            </div>

            <div class="pt-1 mb-4">
              <input class="btn btn-info btn-lg btn-block" style="color: black; background-color: #b1a7a6; border: none; " type="submit" value="Log In">
            </div>

            <!-- Need to figure out how to store the current user to keep their data -->

            <p>Don't have an account? <a href="createAccount.html" class="link-info">Register here</a></p>

          </form>
        </div>

        <div class="col-lg-6 col-12 col-sm-12">
          <img class="commonsPicture" src="./assets/img/mons.jpg" alt="Commons Picture">
        </div>

      </div>

    </div>



  </body>
</html>

<script>
  let element = document.getElementById("emailInput");
  function getCookie(cName) {
      const name = cName + "=";
      const cDecoded = decodeURIComponent(document.cookie); //to be careful
      const cArr = cDecoded .split('; ');
      let res;
      cArr.forEach(val => {
          if (val.indexOf(name) === 0) res = val.substring(name.length);
      })
      return res;
}
  let email = getCookie('email')
  if(email != undefined){
    element.value = email;
  }
</script>
